# DB 훑어보기 - 1
# 키
특정 튜플을 식별할 때 사용하는 속성 혹은 속성의 집합
릴레이션은 중복된 튜플을 허용하지 않는다. 즉 키가 되는 속성(혹은 속성의 집합)은 반드시 값이 달라서 튜플을 서로 구별할 수 있어야 한다.

### 슈퍼키
튜플을 유일하게 식별할 수 있는 하나의 속성 혹은 속성의 집합
중복된 값이 있을 수 있으면 슈퍼키가 될 수 없다.
(주민번호), (주민번호, 이름), (주민번호, 이름, 주소), (고객번호), ... 등

### 후보키
튜플을 유일하게 식별할 수 있는 속성의 최소 집합
슈퍼키는 다수 존재할 수 있지만 후보키는 최소 집합이기에 (주민번호), (고객번호) 와 같은 튜플만 가능하다.
주문 릴레이션이 존재하고, 각 고객이 같은 도서를 2회 이상 구매할 수 없다고 가정하자.
(고객번호), (도서번호)는 중복된 값이 생길 수 있다. 그러나 (고객번호, 도서번호)는 중복된 값을 가질 수 없으므로, 후보키로 사용이 가능하다.

### 기본키
여러  후보키 중 하나를 선정하여 대표로 정하는 키
후보키가 여러 개라면 릴레이션의 특성을 반영하여 하나를 선택하면 된다.

기본키 제약조건
- 릴레이션 내 튜플을 식별할 수 있는 고유한 값을 가져야 한다.
- NULL 값을 허용하지 않는다.
- 키 값의 변동이 일어나지 않아야 한다.
- 최대한 적은 수의 속성을 가진 것이라야 한다.
- 향후 키를 사용하는 데 있어서 문제 발생 소지가 없어야 한다.
릴레이션 스키마를 표현할 때 기본키는 밑줄을 그어 표시한다.

### 대리키
기본키가 보안을 필요로 하거나, 여러 개의 속성으로 구성되어 복잡하거나, 마땅한 기본키가 없을 때 일련번호 같은 가상의 속성을 만들어 기본키로 쓰는 경우가 있다.
직관적으로 무슨 값을 뜻하는지 모르게 한다.
주문번호 같은 키를 말함

### 대체키
기본키로 선정되지 않은 후보키

### 외래키
다른 릴레이션의 기본키를 참조하는 속성
참조하고 참조되는 양쪽 릴레이션의 도메인이 서로 같아야 한다.
참조되는 릴레이션의 기본키 값이 변경되면 이 기본키를 참조하는 외래키 값 역시 변경되어야 한다.(일관성 유지 필요)
외래키는 기본키와 달리 NULL 값을 포함할 수 있고 중복도 허용한다.
외래키가 참조하는 릴레이션과 참조되는 릴레이션이 꼭 다른 릴레이션일 필요는 없다. 자신의 기본키를 참조할수도 있다.

# 무결성 제약조건
데이터 무결성은 DB에 저장된 데이터의 일관성과 정확성을 지키는 것을 말한다.
### 도메인 무결성 제약조건
도메인 제약이라고도 하며, 릴레이션 내의 튜플들이 각 속성의 도메인에 지정된 값만을 가져야 한다는 조건이다.

### 개체 무결성 제약조건
기본키 제약이라고도 하며, 릴레이션의 기본키는 NULL값을 가져서는 안되며 오직 유일한 값만 존재해야 한다는 조건이다.

### 참조 무결성 제약조건
외래키 제약이라고도 한다. 자식 릴레이션의 외래키는 부모 릴레이션의 기본키와 도메인이 동일해야 하며, 자식 릴레이션의 값이 변경될 때 부모 릴레이션의 제약을 받는다. 즉 부모 릴레이션의 도메인과 다른 값으로 삽입, 수정될 경우 거부되고, 반대로 자식 릴레이션에서 참조하고 있는 값을 부모 릴레이션에서 삭제하거나 다른 값으로 변경하려고 하면 거부된다.

- 참조 무결성 제약 조건의 옵션(부모 릴레이션에서 튜플을 삭제할 경우)
	1. RESTRICTED : 자식 릴레이션에서 참조하고 있을 경우 부모 릴레이션의 삭제 작업을 거부함
	2. CASCADE : 자식 릴레이션의 관련 튜플을 같이 삭제함
	3. DEFAULT : 자식 릴레이션의 관련 튜플을 미리 설정해둔 값으로 변경함
	4. NULL : 자식 릴레이션의 관련 튜플을 NULL 값으로 설정함(NULLABLE한 경우)

# 관계대수
사진 첨부 예정
## 조인
- 세타조인 : 두 릴레이션의 속성 값을 비교하여 조건에 만족하는 튜플을 반환한다.
- 동등조인 : 세타조인에서 = 연산자만 사용한 조인
- 자연조인 : 조인에 참여한 속성(칼럼)이 두 번 나오지 않도록 중복된 속성을 제거한 결과를 반환한다.
- 세미조인 : 자연조인을 한 후 두 릴레이션 중 한쪽 릴레이션의 결과만 반환한다.
- 외부조인 : 자연조인 시 조인에 실패한 튜플을 모두 보여주되, 값이 없는 대응 속성은 NULL 값을 채워서 반환한다.
## 디비전
속성 A와 B로 이루어진 릴레이션 R과 속성 B로 이루어진 릴레이션 S의 디비전 연산은, 릴레이션 S의 속성 B 값과 서로 동일하게 대응하는 릴레이션 R의 속성 A의 튜플들을 반환한다.
